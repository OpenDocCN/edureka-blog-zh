# 如何在 Tableau 中实现上下文过滤器

> 原文:[https://www.edureka.co/blog/context-filters-in-tableau/](https://www.edureka.co/blog/context-filters-in-tableau/)

创建过滤器是 Tableau 的一个非常重要的方面。在本文中，我们将按照以下顺序理解 Tableau 中的上下文过滤器:

*   [Tableau 中的上下文过滤器是什么？](#what)
*   [如何在 Tableau](#create) 中创建上下文过滤器
*   [如何加速上下文过滤器](#speed-up)

## **Tableau 中的上下文过滤器是什么？**

通常，您在 Tableau 中设置的所有过滤器都是独立计算的。基本上，它的意思是每个筛选器访问数据源中的所有行，而不考虑其他筛选器。上下文过滤器就像一个独立的过滤器。设置的任何其他过滤器被称为从属过滤器，因为它们只处理通过上下文过滤器的数据。

现在，您可以部署一个上下文过滤器来实现以下任一目标:

*   **更好的性能:**如果设置了很多过滤器或者数据源相当大，查询往往会比较慢。在这种情况下，可以设置上下文过滤器来提高性能。

*   **前 N 名过滤器:**用户也可以设置一个上下文过滤器，只包括他们感兴趣的数据，然后设置一个数字或前 N 名过滤器。

例如，如果你负责一家大型食品连锁店的食品。你的任务是根据所有商店的盈利能力找出前 10 名小吃店。显然，数据是巨大的。在这里，您可以设置一个上下文过滤器，只包含小吃店，并通过将 profit 作为依赖过滤器来创建一个前 10 名过滤器。这将只处理通过上下文过滤器的数据。

[https://www.youtube.com/embed/s4bugYUJsSM](https://www.youtube.com/embed/s4bugYUJsSM)

## **如何在 Tableau 中创建上下文过滤器**

要构建上下文过滤器，请遵循以下给定步骤；

*   从现有分类过滤器的*上下文*菜单中选择 *添加到上下文* 选项。然后计算上下文以生成视图。所有其他过滤器都将根据上下文进行计算。
*   上下文过滤器:

1.  出现在*过滤器*架的顶部。
2.  在*过滤器*架上用灰色标识。
3.  它不能在架子上重新排列。

![context-filters-in-tableau](../Images/93ca28c21019714333b156840fe2353d.png)

如上图所示， *船舶模式* 维度被设置为视图的上下文， *区域* 过滤器仅使用通过 *船舶模式* 的数据进行计算。

您可以通过执行下列操作之一来修改上下文筛选器；

*   **从过滤器架上移除字段**(如果其他上下文过滤器仍在过滤器架上，则计算新的上下文)

*   **编辑过滤器**(每次编辑一个上下文过滤器，都会计算一个新的上下文)

*   **选择从上下文中移除** (过滤器作为标准过滤器保留在架子上。计算新的上下文(如果其他上下文过滤器仍在架子上)

**了解我们在顶级城市的 Tableau 培训课程**

| 印度 | 美国 | 其他热门城市 |
| [班加罗尔的 Tableau 培训](https://www.edureka.co/tableau-certification-training-bangalore) | [达拉斯的 Tableau 球场](https://www.edureka.co/tableau-certification-training-dallas) | [华盛顿的 Tableau 课程](https://www.edureka.co/tableau-certification-training-washington) |
| [海德拉巴的 Tableau 培训](https://www.edureka.co/tableau-certification-training-hyderabad) | [夏洛特的 Tableau 课程](https://www.edureka.co/tableau-certification-training-charlotte) | [奥斯汀的 Tableau 课程](https://www.edureka.co/tableau-certification-training-austin) |
| [金奈的 Tableau 培训](https://www.edureka.co/tableau-certification-training-chennai) | [纽约的 Tableau 课程](https://www.edureka.co/tableau-certification-training-new-york-city) | [西雅图的 Tableau 课程](https://www.edureka.co/tableau-certification-training-seattle) |

## **如何加速上下文过滤器**

为了提高上下文过滤器的性能，从而提高 Tableau 的效率，您可以遵循以下准则；

*   部署单个上下文过滤器可以显著减小数据集的大小，这是一个比应用多个过滤器更好的主意。事实上，如果过滤器没有将数据集的大小减少十分之一或更多，那么将其添加到上下文中实际上更糟。它以计算上下文的性能为代价。

*   在创建上下文之前，应该完成所有的数据建模。数据模型中的变更，例如将维度转换为度量，需要重新计算上下文。

*   为上下文设置所需的过滤器。此外，在将字段添加到其他工具架之前，请创建上下文。当您将字段放到其他工具架上时，这些先决条件使查询运行得更快。

*   对离散日期使用类似于 *YEAR(date)* 的日期框或上下文过滤器比使用连续日期更有效。

如果您的数据集被大量索引，上下文过滤器可能无法提供您想要的性能，实际上还可能导致查询性能降低。

**演示**

此示例旨在向您介绍构建上下文过滤器的过程。

*   首先，您将筛选一个视图，按销售额显示前 10 名产品。接下来，在*产品类别*上创建一个上下文过滤器，这样您就可以看到排名前 10 位的家具产品。

*   使用 ***样本-超市*** 数据源创建初始视图。该视图显示所有*子类别*的销售额，按降序排列。

![context-filters-in-tableau](../Images/efa2c2f242405b8087ef57fc1a3ffa6b.png)

*   现在构建一个前 10 名的过滤器，只显示最畅销的产品。你可以将 *子类别* 字段拖到*过滤器*架上。在出现的对话框中，切换到顶部选项卡并定义一个过滤器，该过滤器是按*销售总额*排序的前 10 名。

![filter](../Images/cfc4e8187be9c228e620b8b9953dbdd8.png)

*   当你点击 *OK* 按钮时，你会看到视图被过滤，在你面前显示销售额最高的 10 个产品子类别。

![sub category](../Images/d93ceea2a54459d208df1851e1b33aab.png)

*   接下来，让我们尝试添加另一个过滤器，只显示家具产品。现在拖动 *类别* 字段到*过滤器*架子上，选择唯一的 *家具* 。完成后，点击 *上的确定* 按钮。视图经过筛选，但现在只显示了 3 种产品，而不是 10 种产品。这是因为默认情况下，所有过滤器都是单独评估的，并且视图被设计为显示结果的交集。所以在屏幕上，你会看到前 10 名的整体产品中有 3 个是家具产品。

。![furniture](../Images/f6514f4ca943bb19eb830996e9af9815.png)

*   接下来，为了确定排名前 10 位的家具产品，我们需要让*类别*过滤器成为一个上下文过滤器。右键点击*过滤器*架子的字段，选择 *添加到上下文* 选项。

*   该筛选器被标记为上下文筛选器。视图会更新以显示四大家具产品。

![](../Images/8e486e6850c1a8455bfc34be818c58da.png)

但为什么不是 10 年？这是因为只有四个子类包含家具。但是现在您知道了，前 10 个过滤器是根据该上下文的结果进行评估的。

希望这篇文章消除了你对 Tableau 中的上下文过滤器的疑虑。至此，我们结束了 Tableau 中的这些上下文过滤器。

*如果你希望掌握 Tableau，Edureka 有一个策划的 **[Tableau 课程](https://www.edureka.co/tableau-certification-training)** ，它深入涵盖了数据可视化的各种概念，包括条件格式、脚本、链接图表、仪表板集成、Tableau 与 R 的集成等等。它提供 24*7 支持，在整个学习期间为您提供指导。新的批次即将开始。*

*有问题吗？请在“Tableau 中的上下文过滤器”的评论部分提到它，我们会尽快回复您。*T3】